(this["webpackJsonprpi-aquarium"]=this["webpackJsonprpi-aquarium"]||[]).push([[0],{57:function(t,e,n){},65:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(7),o=n.n(r),c=(n(57),n(41)),s=n.n(c),l=n(43),u=n(24),p=n(102),m=n(104),d=n(99),h=n(101),b=n(103),f=n(97),j=n(44),g=n.n(j),O=n(25),x=n.n(O),v=n(45),y=n.n(v),S=n(46),w=n.n(S),F=n(10);w()(x.a);var k={hour:{title:"1\u6642\u9593"},"half-day":{title:"12\u6642\u9593"},day:{title:"24\u6642\u9593"},week:{title:"1\u9031\u9593"}},T={temperature:{title:"\u6e29\u5ea6",unit:"\u2103"}};x.a.setOptions({lang:{decimalPoint:".",thousandsSep:",",numericSymbols:null},time:{useUTC:!1}});var q=Object(f.a)((function(t){return{root:{width:"100vw",height:"100vh"},formControl:{margin:10,display:"inline-block",minWidth:70},title:{margin:15,display:"inline-block",minWidth:100,fontSize:28,fontWeight:"bold"},loading:{position:"absolute",top:"calc(50% - 32px)",left:"calc(50% - 32px)"}}}));var C=function(){var t=q(),e=Object(a.useState)("hour"),n=Object(u.a)(e,2),i=n[0],r=n[1],o=Object(a.useState)(Object.keys(T)[0]),c=Object(u.a)(o,2),f=c[0],j=(c[1],Object(a.useState)(null)),O=Object(u.a)(j,2),v=O[0],S=O[1],w=Object(a.useState)(null),C=Object(u.a)(w,2),E=C[0],z=C[1],L=Object(a.useState)(null),N=Object(u.a)(L,2),P=N[0],Y=N[1],H=Object(a.useState)(!1),J=Object(u.a)(H,2),M=J[0],W=J[1];return Object(a.useEffect)((function(){Object(l.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"https://rpi-aquarium-api-g6z6megp7q-an.a.run.app",fetch("".concat("https://rpi-aquarium-api-g6z6megp7q-an.a.run.app","/devices")).then((function(t){return t.text()})).then((function(t){return JSON.parse(t)})).then((function(t){for(var e in t){t[e].isShow=!0}S(t)})).catch((function(t){console.error("".concat(t))}));case 2:case"end":return t.stop()}}),t)})))()}),[]),Object(a.useEffect)((function(){W(!0);var t="".concat("https://rpi-aquarium-api-g6z6megp7q-an.a.run.app","/?span=").concat(i);fetch(t).then((function(t){return t.text()})).then((function(t){return JSON.parse(t,(function(t,e){return/\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z/.test(e)?new Date(e):e}))})).then((function(t){z(t),W(!1)})).catch((function(t){console.error("".concat(t)),W(!1)}))}),[v,i]),Object(a.useEffect)((function(){var t=T[f],e=[];switch(i){case"hour":var n=function(n){var a=E[n],i=[];a.forEach((function(t){i.push([t.datetime.getTime(),t[f]])})),e.push({type:"line",name:v[n].name,data:i,tooltip:{headerFormat:"{series.name}<br>",pointFormat:"{point.x:%Y/%m/%d %H:%M} <b>{point.y:.2f}</b> [".concat(t.unit,"]")}})};for(var a in E)n(a);break;case"half-day":case"day":case"week":var r=function(n){var a=E[n],i=[],r=[];a.forEach((function(t){null==t[f]?(i.push([t.datetime.getTime(),null]),r.push([t.datetime.getTime(),null,null])):(i.push([t.datetime.getTime(),t[f].average]),r.push([t.datetime.getTime(),t[f].min,t[f].max]))})),e.push({type:"line",name:v[n].name,data:i,tooltip:{headerFormat:"{series.name}<br>",pointFormat:"{point.x:%Y/%m/%d %H:%M} <b>average:{point.y:.2f}</b> [".concat(t.unit,"]")}}),e.push({type:"errorbar",name:v[n].name,data:r,tooltip:{headerFormat:"{series.name}<br>",pointFormat:"{point.x:%Y/%m/%d %H:%M} <b> min:{point.low:.2f} max:{point.high:.2f}</b> [".concat(t.unit,"]")},color:"#888"})};for(var o in E)r(o)}var c={series:e,title:{text:""},chart:{zoomType:"x"},xAxis:{title:{text:"Date"},type:"datetime",minPadding:.1,maxPadding:0,showLastLabel:!0,dateTimeLabelFormats:{hour:"%H:00",day:"%m/%d",week:"%m/%d",month:"%Y/%m",year:"%Y"}},yAxis:{title:{text:"".concat(t.title," [").concat(t.unit,"]")},opposite:!0,offset:0},exporting:{enabled:!1},plotOptions:{series:{animation:!0},area:{fillColor:!1,lineWidth:2,threshold:null}},scrollbar:{enabled:!0},navigator:{enabled:!1},rangeSelector:{enabled:!1},legend:{enabled:!0}},s=Object(F.jsx)(y.a,{highcharts:x.a,options:c});Y(s)}),[E]),Object(F.jsxs)(a.Fragment,{children:[Object(F.jsx)(p.a,{className:t.title,children:"rpi aquarium"}),Object(F.jsxs)(d.a,{className:t.formControl,children:[Object(F.jsx)(m.a,{id:"select-span-label",children:"\u671f\u9593"}),Object(F.jsx)(h.a,{labelId:"select-span-label",id:"select-span",value:i,onChange:function(t){r(t.target.value)},children:Object.keys(k).map((function(t){return Object(F.jsx)(b.a,{value:t,children:k[t].title},t)}))})]}),P,M?Object(F.jsx)(g.a,{className:t.loading,type:"spin",color:"rgb(53, 126, 221)"}):null]})},E=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,107)).then((function(e){var n=e.getCLS,a=e.getFID,i=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),a(t),i(t),r(t),o(t)}))};o.a.render(Object(F.jsx)(i.a.StrictMode,{children:Object(F.jsx)(C,{})}),document.getElementById("root")),E()}},[[65,1,2]]]);